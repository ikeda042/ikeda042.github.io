<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IKEDA Yunosuke - Portfolio</title>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #111111;
            --gray-text: #666666;
            --border-color: #111111;
        }

        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            line-height: 1.8;
            color: var(--text-color);
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 720px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        header {
            padding: 6rem 0 3rem;
            margin-bottom: 4rem;
            border-bottom: 2px solid var(--border-color);
        }
        .access-counter {
            display: inline-flex;
            align-items: center;
            gap: 0.45rem;
            margin-bottom: 1.2rem;
            padding: 0.35rem 0.75rem;
            border: 1px solid #dddddd;
            background: #fafafa;
            color: var(--gray-text);
            font-size: 0.8rem;
            font-weight: 700;
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }
        .access-counter strong {
            color: var(--text-color);
            font-size: 0.9rem;
            letter-spacing: 0.03em;
        }
        header h1 {
            margin: 0;
            font-size: 3rem;
            font-weight: 800;
            letter-spacing: -0.02em;
            line-height: 1.2;
        }
        header p {
            margin: 1rem 0 0;
            font-size: 0.9rem;
            color: var(--gray-text);
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        section {
            margin-bottom: 5rem;
        }
        h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-top: 0;
            margin-bottom: 2rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        /* Online clipboard */
        #online-clipboard {
            margin-top: 1rem;
            padding: 2.5rem 2rem;
            background-color: #fafafa;
            border: 1px solid #eaeaea;
        }
        #online-clipboard h2 {
            margin-top: 0;
        }
        .clipboard-description {
            margin-top: -1rem;
            margin-bottom: 1.5rem;
            color: var(--gray-text);
            font-size: 0.95rem;
        }
        .clipboard-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .clipboard-form label {
            font-weight: 700;
            letter-spacing: 0.03em;
            font-size: 0.9rem;
        }
        .clipboard-form textarea {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            border: 1px solid #cccccc;
            resize: vertical;
            font: inherit;
            box-sizing: border-box;
            line-height: 1.6;
            color: var(--text-color);
            background: #ffffff;
            transition: all 0.2s ease;
        }
        .clipboard-form textarea:focus {
            outline: none;
            border-color: var(--border-color);
            box-shadow: 4px 4px 0px rgba(17, 17, 17, 0.1);
        }
        .clipboard-btn {
            width: fit-content;
            min-width: 150px;
            border: 2px solid var(--border-color);
            background: var(--text-color);
            color: var(--bg-color);
            font-weight: 700;
            letter-spacing: 0.06em;
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .clipboard-btn:hover {
            background: transparent;
            color: var(--text-color);
            transform: translateY(-2px);
        }
        .clipboard-btn:disabled {
            opacity: 0.45;
            cursor: not-allowed;
            transform: none;
        }
        .clipboard-status {
            min-height: 1.5rem;
            margin-top: 1rem;
            margin-bottom: 1.5rem;
            color: var(--gray-text);
            font-size: 0.95rem;
            font-weight: bold;
        }
        .clipboard-status.error {
            color: #d93025;
        }

        /* Clipboard List (Card Style) */
        .clipboard-list {
            list-style: none;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .clipboard-item {
            background: #ffffff;
            border: 1px solid #eeeeee;
            padding: 1.25rem;
            transition: all 0.2s ease;
        }
        .clipboard-item:hover {
            border-color: #cccccc;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
        }
        .clipboard-item-row {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .clipboard-item-text {
            white-space: pre-wrap;
            overflow-wrap: anywhere;
            font-family: monospace;
            font-size: 0.95rem;
            color: #333333;
            background: #f9f9f9;
            padding: 1rem;
            border-left: 3px solid var(--border-color);
        }
        .clipboard-item-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
        }
        .clipboard-action-btn {
            border: 1px solid var(--border-color);
            background: transparent;
            color: var(--text-color);
            padding: 0.4rem 1rem;
            font-size: 0.8rem;
            font-weight: 700;
            letter-spacing: 0.04em;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .clipboard-action-btn:hover {
            background: var(--text-color);
            color: var(--bg-color);
        }
        .clipboard-action-btn:disabled {
            opacity: 0.45;
            cursor: not-allowed;
        }

        #about p {
            font-size: 1.1rem;
        }

        .meta {
            margin-top: 1.25rem;
            color: var(--gray-text);
            font-size: 0.95rem;
        }
        .meta strong {
            color: var(--text-color);
            font-weight: 700;
        }

        /* Timeline */
        .timeline {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .timeline-item {
            display: flex;
            padding: 1.5rem 0;
            border-bottom: 1px solid #eeeeee;
        }
        .timeline-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }
        .timeline-date {
            flex: 0 0 160px;
            font-weight: 600;
            color: var(--text-color);
            font-family: 'Helvetica Neue', Arial, sans-serif;
            font-size: 0.95rem;
        }
        .timeline-content {
            flex: 1;
            font-size: 1rem;
            color: var(--text-color);
        }
        .timeline-title {
            font-weight: 700;
            margin-bottom: 0.25rem;
        }
        .timeline-sub {
            color: var(--gray-text);
            font-size: 0.95rem;
            margin-top: 0.35rem;
        }
        .inline-link {
            color: var(--text-color);
            text-decoration: none;
            border-bottom: 1px solid var(--text-color);
            padding-bottom: 2px;
            transition: opacity 0.3s ease;
            font-weight: 700;
        }
        .inline-link:hover { opacity: 0.5; }

        @media (max-width: 600px) {
            .timeline-item { flex-direction: column; }
            .timeline-date {
                margin-bottom: 0.5rem;
                color: var(--gray-text);
                flex: 1 1 auto;
            }
        }

        /* Lists */
        .bullets {
            margin: 0;
            padding-left: 1.25rem;
        }
        .bullets li { margin: 0.4rem 0; }

        /* Projects */
        .project {
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid #eeeeee;
        }
        .project:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        .project h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.25rem;
        }
        .project p {
            color: var(--gray-text);
            margin-bottom: 1.25rem;
        }
        .project a {
            display: inline-block;
            color: var(--text-color);
            text-decoration: none;
            font-weight: 700;
            font-size: 0.9rem;
            border-bottom: 1px solid var(--text-color);
            padding-bottom: 2px;
            transition: opacity 0.3s ease;
        }
        .project a:hover { opacity: 0.5; }

        /* Button */
        .contact-btn {
            display: inline-block;
            background: transparent;
            color: var(--text-color);
            text-decoration: none;
            padding: 1rem 3rem;
            border: 2px solid var(--border-color);
            font-weight: bold;
            letter-spacing: 0.1em;
            transition: all 0.3s ease;
        }
        .contact-btn:hover {
            background: var(--text-color);
            color: var(--bg-color);
        }

        footer {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--gray-text);
            font-size: 0.85rem;
            border-top: 1px solid #eeeeee;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <p class="access-counter" aria-live="polite">Access Count: <strong id="access-count-value">...</strong></p>
            <h1>池田 有之介</h1>
            <p>IKEDA Yunosuke / CEO @ Ellipsys / Bioengineering × Computer Science</p>
        </header>

        <section id="online-clipboard">
            <h2>Online Clipboard</h2>
            <p class="clipboard-description">保存したテキストは新しい順で表示されます。</p>
            <form id="clipboard-form" class="clipboard-form">
                <label for="clipboard-input">テキストを保存</label>
                <textarea id="clipboard-input" name="str" placeholder="ここに文字列を入力" required></textarea>
                <button id="clipboard-submit" class="clipboard-btn" type="submit">Save Text</button>
            </form>
            <p id="clipboard-status" class="clipboard-status" aria-live="polite"></p>
            <ul id="clipboard-list" class="clipboard-list"></ul>
        </section>

        <section id="about">
            <h2>About</h2>
            <p>
                生物工学とコンピュータサイエンスの交差領域で、研究現場の課題を「ソフトウェア化」して解くことに取り組んでいます。
                広島大学（生物工学）でのバックグラウンドと、University of MinnesotaでのCS留学経験をベースに、
                画像解析・Web/API・プロダクト開発を横断して、研究室DXや新規事業の立案/開発を推進しています。
            </p>
        </section>

        <section id="skills">
            <h2>Skills</h2>
            <ul class="bullets">
                <li>フルスタックWeb開発（バックエンド中心）</li>
                <li>API高速展開（Vercel / NEON / v0 / MCP / n8n / 各種API）</li>
                <li>画像解析・研究向けソフトウェア開発（ローカルサーバー展開/運用）</li>
                <li>日英通訳</li>
            </ul>
        </section>

        <section id="experience">
            <h2>Experience</h2>
            <ul class="timeline">
                <li class="timeline-item">
                    <div class="timeline-date">2025.05 – 現在</div>
                    <div class="timeline-content">
                        <div class="timeline-title">トグルホールディングス株式会社 / CTO室（インターン）</div>
                        <div class="timeline-sub">
                            Vercel, NEON, v0, MCP（codex/claude code）, n8n と各種APIを用いた高速なWebサービス開発の経験を蓄積。
                        </div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2025.04 – 現在</div>
                    <div class="timeline-content">
                        <div class="timeline-title">
                            <a class="inline-link" href="https://ellipsys.co.jp/" target="_blank" rel="noopener noreferrer">合同会社Ellipsys</a>
                            / CEO
                        </div>
                        <div class="timeline-sub">新規事業立案/開発 等。</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2025.04 – 現在</div>
                    <div class="timeline-content">
                        <div class="timeline-title">広島大学 / 教育特別研究員</div>
                        <div class="timeline-sub">
                            画像解析ソフトの開発およびローカルネットワーク内でのソフトウェア展開。
                            （参考:
                            <a class="inline-link" href="https://github.com/ikeda042/PhenoPixel6.0" target="_blank" rel="noopener noreferrer">PhenoPixel</a>
                            ）
                        </div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2025.01</div>
                    <div class="timeline-content">
                        <div class="timeline-title">ミズノ株式会社 / データ活用部門 スポーツデータ解析（インターン）</div>
                        <div class="timeline-sub">スポーツデータの解析およびアプリケーション開発。</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2024.12</div>
                    <div class="timeline-content">
                        <div class="timeline-title">（株）ブリヂストン / データ解析（インターン）</div>
                        <div class="timeline-sub">
                            プロダクトのデータ解析。古典的線形次元削減アルゴリズムを選定し、予測モデルを構築。
                        </div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2024.12</div>
                    <div class="timeline-content">
                        <div class="timeline-title">キリンホールディングス株式会社 / デジタルICT部門（インターン）</div>
                        <div class="timeline-sub">2024年冬インターン（NDAにより詳細非公開）。</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2024.09</div>
                    <div class="timeline-content">
                        <div class="timeline-title">サントリーホールディングス株式会社 / D&amp;T（インターン）</div>
                        <div class="timeline-sub">2024年夏インターン（NDAにより詳細非公開）。</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2024.08 – 2024.09</div>
                    <div class="timeline-content">
                        <div class="timeline-title">ExaWizards Inc. / C&amp;I部門（インターン）</div>
                        <div class="timeline-sub">
                            NDAにより記載不可（概要等）。
                        </div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2024.07 – 現在</div>
                    <div class="timeline-content">
                        <div class="timeline-title">UT-LAB / メンバー</div>
                        <div class="timeline-sub">コミュニティ活動。</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2024.04 – 現在</div>
                    <div class="timeline-content">
                        <div class="timeline-title">広島大学 人間社会科学研究科 氏間研究室 / フルスタックエンジニア</div>
                        <div class="timeline-sub">
                            文科省プロジェクトUD-Bookのシステム開発（参考:
                            <a class="inline-link" href="https://home.hiroshima-u.ac.jp/ujima/onsei/index.html" target="_blank" rel="noopener noreferrer">研究室ページ</a>
                            ）。
                        </div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2024.04 – 現在</div>
                    <div class="timeline-content">
                        <div class="timeline-title">広島大学大学院 / 統合生命科学研究科 生物工学プログラム（修士）</div>
                        <div class="timeline-sub">研究とプロダクト開発を接続するテーマで活動。</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2022.10 – 2024.03</div>
                    <div class="timeline-content">
                        <div class="timeline-title">合同会社Ellipsys / CTO</div>
                        <div class="timeline-sub">
                            バックエンド中心にシステム開発（MongoDB / MariaDB / FastAPI / React / Docker）。
                        </div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2022.09 – 2023.06</div>
                    <div class="timeline-content">
                        <div class="timeline-title">University of Minnesota Twin Cities / CSE（留学）</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2020.02 – 2020.03</div>
                    <div class="timeline-content">
                        <div class="timeline-title">IIT Bombay / 都市工学（短期）</div>
                        <div class="timeline-sub">渋滞回避問題などを学習。</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2019.08 – 2019.09</div>
                    <div class="timeline-content">
                        <div class="timeline-title">フリンダース大学 / 国際協力（短期研修）</div>
                        <div class="timeline-sub">人生初の海外研修として参加。</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2019.06 – 2020.03</div>
                    <div class="timeline-content">
                        <div class="timeline-title">合同会社エキスパーツ / CTO</div>
                        <div class="timeline-sub">家庭教師サービスのシステム担当。</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2018.08 – 2019.04</div>
                    <div class="timeline-content">
                        <div class="timeline-title">NPO法人ドットジェイピー / アナリティクス（インターン）</div>
                        <div class="timeline-sub">顧客の情報収集・分析。</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2018.04 – 2024.03</div>
                    <div class="timeline-content">
                        <div class="timeline-title">広島大学 工学部 第3類（一般入試）</div>
                        <div class="timeline-sub">発酵工学を中心に学習。</div>
                    </div>
                </li>

                <li class="timeline-item">
                    <div class="timeline-date">2026.04 –</div>
                    <div class="timeline-content">
                        <div class="timeline-title">広島大学大学院 / 統合生命科学研究科 生物工学プログラム（博士課程）</div>
                        <div class="timeline-sub">進学予定。</div>
                    </div>
                </li>
            </ul>
        </section>

        <section id="projects">
            <h2>Projects</h2>

            <div class="project">
                <h3>LabSocket（研究室DXプロダクト）</h3>
                <p>
                    これまでの経験を統合して、研究室DXを行うプロダクトをローンチしました（広島大学スタートアップチャレンジ2025）。
                    研究現場のオペレーションを「ソフトウェア/API」に落とし込み、導入障壁を下げることを狙っています。
                </p>
                <a href="https://www.labsocket.info/" target="_blank" rel="noopener noreferrer">View details &rarr;</a>
            </div>

            <div class="project">
                <h3>PhenoPixel（細胞画像解析ソフト）</h3>
                <p>
                    顕微鏡データから細胞情報を高速に抽出し、夜間の自動解析まで含めたパイプラインを構築。
                    ローカルサーバーに展開し、ラボ内の全員が同一プログラム/APIへブラウザからアクセスできる形で運用しています。
                </p>
                <a href="https://www.labsocket.info/products/phenopixel5/index.html" target="_blank" rel="noopener noreferrer">Product page &rarr;</a>
            </div>

            <div class="project">
                <h3>UD-Book（文科省プロジェクト / システム開発）</h3>
                <p>
                    広島大学 人間社会科学研究科 氏間研究室にて、UD-Bookのシステム開発を担当。
                    研究要件と運用要件を両立する形で、実装と改善サイクルを回しています。
                </p>
                <a href="https://home.hiroshima-u.ac.jp/ujima/onsei/index.html" target="_blank" rel="noopener noreferrer">Lab page &rarr;</a>
            </div>

            <div class="project">
                <h3>令和5年度 広島大学秋季学位記授与式（英語司会）</h3>
                <p>令和5年度 広島大学秋季学位記授与式にて、英語司会を務めました。</p>
                <a href="https://www.hiroshima-u.ac.jp/news/79005" target="_blank" rel="noopener noreferrer">View details &rarr;</a>
            </div>

            <div class="project">
                <h3>令和の虎（プロダクト開発）</h3>
                <p>
                    プロダクト開発の実務経験を積み、要件定義〜実装・改善までの一連を学びました。
                </p>
            </div>
        </section>

        <section id="awards">
            <h2>Awards</h2>
            <ul class="bullets">
                <li>広島大学スタートアップチャレンジ2025（2025.12）</li>
                <li>大学院学費免除2025（2025.06）</li>
                <li>PSI学生アイデアピッチ - 中国銀行賞（2025.02）</li>
                <li>広島大学スタートアップチャレンジ2024（2024.12）</li>
                <li>広島大学スタートアップチャレンジ2023（2023.12）</li>
            </ul>
        </section>

        <section id="contact">
            <h2>Contact</h2>
            <p>研究やプロジェクト、事業に関するお問い合わせは、以下のメールアドレスまでご連絡ください。</p>
            <p style="margin-top: 2rem; font-size: 1.1rem; font-weight: 700;">ikeda@ellipsys.co.jp</p>
        </section>
    </div>

    <footer>
        &copy; <span id="footer-year">2026</span> IKEDA Yunosuke. All rights reserved.
    </footer>

    <script>
        const CLIPBOARD_API_URL = 'https://githubio-api.vercel.app/api/v1/clipboards';
        const ACCESS_COUNT_API_URL = 'https://githubio-api.vercel.app/api/v1/count';

        const clipboardForm = document.getElementById('clipboard-form');
        const clipboardInput = document.getElementById('clipboard-input');
        const clipboardSubmit = document.getElementById('clipboard-submit');
        const clipboardStatus = document.getElementById('clipboard-status');
        const clipboardList = document.getElementById('clipboard-list');
        const accessCountValue = document.getElementById('access-count-value');

        const setClipboardStatus = (message, isError = false) => {
            clipboardStatus.textContent = message;
            clipboardStatus.classList.toggle('error', isError);
        };

        const parseJsonSafely = async (response) => {
            try {
                return await response.json();
            } catch (_error) {
                return null;
            }
        };

        const renderAccessCount = (count) => {
            if (typeof count !== 'number' || !Number.isFinite(count) || count < 0) {
                accessCountValue.textContent = '--';
                return;
            }
            accessCountValue.textContent = count.toLocaleString('ja-JP');
        };

        const fetchAccessCount = async () => {
            const response = await fetch(ACCESS_COUNT_API_URL, {
                method: 'GET',
                headers: { 'Content-Type': 'application/json' }
            });
            const payload = await parseJsonSafely(response);

            if (!response.ok || typeof payload !== 'number') {
                throw new Error('failed_to_fetch_access_count');
            }

            return payload;
        };

        const updateAccessCountOnVisit = async () => {
            try {
                await fetch(ACCESS_COUNT_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });
            } catch (_error) {
                // Ignore increment error and still try fetching the latest total.
            }

            try {
                const total = await fetchAccessCount();
                renderAccessCount(total);
            } catch (_error) {
                renderAccessCount(null);
            }
        };

        const deleteClipboardEntry = async (text) => {
            const candidates = [
                {
                    url: CLIPBOARD_API_URL,
                    init: {
                        method: 'DELETE',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ str: text })
                    }
                },
                {
                    url: CLIPBOARD_API_URL,
                    init: {
                        method: 'DELETE',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ text })
                    }
                },
                {
                    url: `${CLIPBOARD_API_URL}?str=${encodeURIComponent(text)}`,
                    init: { method: 'DELETE' }
                }
            ];

            let lastError = '削除に失敗しました。';

            for (const candidate of candidates) {
                const response = await fetch(candidate.url, candidate.init);
                const payload = await parseJsonSafely(response);

                if (response.ok) {
                    return;
                }

                lastError = payload && payload.error ? payload.error : lastError;
            }

            throw new Error(lastError);
        };

        const renderClipboardList = (items) => {
            clipboardList.innerHTML = '';

            if (!items.length) {
                const li = document.createElement('li');
                li.className = 'clipboard-item';
                li.style.textAlign = 'center';
                li.style.color = 'var(--gray-text)';
                li.style.background = 'transparent';
                li.style.border = '1px dashed #cccccc';
                li.textContent = 'まだ保存されたテキストはありません。';
                clipboardList.appendChild(li);
                return;
            }

            items.forEach((item) => {
                const li = document.createElement('li');
                li.className = 'clipboard-item';

                const row = document.createElement('div');
                row.className = 'clipboard-item-row';

                const text = document.createElement('div');
                text.className = 'clipboard-item-text';
                text.textContent = item;

                const actions = document.createElement('div');
                actions.className = 'clipboard-item-actions';

                const copyBtn = document.createElement('button');
                copyBtn.type = 'button';
                copyBtn.className = 'clipboard-action-btn copy-btn';
                copyBtn.textContent = 'Copy';
                copyBtn.addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(item);
                        copyBtn.textContent = 'Copied!';
                        copyBtn.style.background = 'var(--text-color)';
                        copyBtn.style.color = 'var(--bg-color)';
                        setTimeout(() => {
                            copyBtn.textContent = 'Copy';
                            copyBtn.style.background = 'transparent';
                            copyBtn.style.color = 'var(--text-color)';
                        }, 2000);
                    } catch (_error) {
                        alert('コピーに失敗しました');
                    }
                });

                const deleteBtn = document.createElement('button');
                deleteBtn.type = 'button';
                deleteBtn.className = 'clipboard-action-btn delete-btn';
                deleteBtn.textContent = 'Delete';
                deleteBtn.addEventListener('click', async () => {
                    deleteBtn.disabled = true;
                    copyBtn.disabled = true;
                    setClipboardStatus('削除中...');

                    try {
                        await deleteClipboardEntry(item);
                        setClipboardStatus('削除しました。');
                        await loadClipboardList();
                        setTimeout(() => setClipboardStatus(''), 3000);
                    } catch (error) {
                        const message = error instanceof Error ? error.message : '削除に失敗しました。';
                        setClipboardStatus(`削除に失敗しました: ${message}`, true);
                        deleteBtn.disabled = false;
                        copyBtn.disabled = false;
                    }
                });

                actions.appendChild(copyBtn);
                actions.appendChild(deleteBtn);

                row.appendChild(text);
                row.appendChild(actions);
                li.appendChild(row);
                clipboardList.appendChild(li);
            });
        };

        const loadClipboardList = async () => {
            setClipboardStatus('読み込み中...');
            try {
                const response = await fetch(CLIPBOARD_API_URL, {
                    method: 'GET',
                    headers: { 'Content-Type': 'application/json' }
                });
                const payload = await parseJsonSafely(response);

                if (!response.ok || !Array.isArray(payload)) {
                    throw new Error('failed_to_fetch');
                }

                renderClipboardList(payload);
                setClipboardStatus('');
            } catch (_error) {
                renderClipboardList([]);
                setClipboardStatus('一覧の取得に失敗しました。時間をおいて再試行してください。', true);
            }
        };

        clipboardForm.addEventListener('submit', async (event) => {
            event.preventDefault();
            const value = clipboardInput.value.trim();

            if (!value) {
                setClipboardStatus('文字列を入力してください。', true);
                return;
            }

            clipboardSubmit.disabled = true;
            setClipboardStatus('保存中...');

            try {
                const response = await fetch(CLIPBOARD_API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ str: value })
                });
                const payload = await parseJsonSafely(response);

                if (!response.ok) {
                    const message = payload && payload.error ? payload.error : '保存に失敗しました。';
                    throw new Error(message);
                }

                clipboardInput.value = '';
                setClipboardStatus('保存しました。');
                await loadClipboardList();
            } catch (error) {
                const message = error instanceof Error ? error.message : '保存に失敗しました。';
                setClipboardStatus(`保存に失敗しました: ${message}`, true);
            } finally {
                clipboardSubmit.disabled = false;
            }
        });

        updateAccessCountOnVisit();
        loadClipboardList();
        document.getElementById('footer-year').textContent = new Date().getFullYear();
    </script>
</body>
</html>
